Данный веб-сервер был разработан в рамках мегахакатона от skillfactory кейс НАФИ. 
Краткое содержание и описание файлов и их функций: 
1. main.go
   - Файл main.go содержит код для инициализации и запуска веб-сервера, а также настройку и запуск Telegram бота.
   - Выполняется загрузка конфигурации из файла toml, инициализация сервера и запуск веб-сервера на указанном порту.
   - Также инициализируется Telegram бот, устанавливается Webhook, и запускается прослушивание обновлений от бота.

2.errors.go
   - В данном файле определено одно пользовательское исключение `ErrRecordNotFound`, которое указывает на отсутствие записи.


3.repository.go
   - В этом файле определен интерфейс `UserRepository`, который содержит методы для создания, поиска пользователя по id и поиска по email.

4.responsewriter.go
   - Файл `responsewriter.go` определяет структуру `responseWriter`, которая расширяет стандартный `http.ResponseWriter` и добавляет поле для хранения статусного кода ответа.

5.server.go
   - В этом файле описан функционал создания и настройки веб-сервера, обработки запросов и аутентификации пользователей.
   - Здесь определен тип `server` с методами для настройки роутера, установки идентификатора запроса, логирования запросов, аутентификации пользователя, и обработки запросов пользователей и сессий.


6. Файл "000001_create_users_table.up.sql"
   - В этом файле содержится запрос на создание таблицы "users" в базе данных.
   - Таблица "users" содержит следующие поля: "id" - уникальный идентификатор пользователя, "email" - адрес электронной почты, "encrypted_password" - зашифрованный пароль пользователя
7.Файл "000001_create_users_table.down.sql":
В данном файле находится запрос на удаление таблицы "users" из базы данных.
8. Файл "apiserver.go"
   - В этом файле находится код для инициализации и запуска веб-сервера.
   - Функция `Start` создает базу данных, хранилище, хранилище сессий, и сервер, а затем запускает веб-сервер.
   - Функция `newDB` создает новое подключение к базе данных PostgreSQL.

9. Файл "apiserver.toml"
   - В данном файле содержатся конфигурационные параметры для сервера.
   - `bind_addr` - адрес и порт, на котором будет запущен сервер.
   - `log_level` - уровень журналирования (логирования).
   - `database_url` - URL для подключения к базе данных PostgreSQL.
   - `session_key` - секретный ключ для сессий.

10. Файл "config.go"
   - В этом файле находится структура `Config`, которая представляет конфигурацию сервера.
   - `Config` содержит параметры: `BindAddr`, `LogLevel`, `DatabaseURL`, `SessionKey`.
   - Функция `NewConfig` создает новый экземпляр конфигурации сервера с указанными значениями по умолчанию.


11. server_internal_test.go
   - В этом файле содержатся юнит-тесты для методов сервера веб-приложения.
   - Тесты включают проверку аутентификации пользователей, создания новых пользователей и создания новой сессии.
   - Каждый тест представлен в виде структуры `testCase`, где определены параметры теста и ожидаемый код ответа.
   - Для каждого теста создаются запросы HTTP и проверяется код ответа.

12. store.go
   - В данном файле определен интерфейс `Store`, который описывает метод `User() UserRepository`.
   - Интерфейс `Store` предполагает наличие методов для работы с данными о пользователях.

13.store_test.go
   - В файле store_test.go содержится тестовая функция `TestMain`, которая устанавливает URL базы данных перед запуском тестов.
   - Определена переменная `databaseURL`, которая используется для установки URL базы данных.

14.testing.go
   - В файле testing.go определена функция `TestUser`, которая создает тестового пользователя с email и паролем.

15.user.go
   - Файл user.go содержит определение структуры `User`, описывающей модель пользователя.
   - В структуре `User` присутствуют поля для идентификации пользователя, email, пароля и зашифрованного пароля.
   - В файле также присутствуют методы для валидации, шифрования пароля, сравнения паролей и обработки данных пользователя.


16.user_test.go
   - В файле user_test.go содержатся тесты для валидации пользователей в приложении.
   - Функция `TestUser_Validate` запускает несколько тестовых случаев для проверки валидации пользователей.
   - Каждый тестовый случай представлен в виде структуры `testCase`, с определениями пользовательских данных, ожидаемой валидности и проверкой результатов.
   - Также в файле есть тестовая функция `TestUser_BeforeCreate` для проверки корректного выполнения действий перед созданием пользователя.

17.userrepository.go
   - Файл userrepository.go содержит реализацию интерфейса хранилища пользователей `UserRepository`.
   - В структуре `UserRepository` хранится карта пользователей и методы для их создания и поиска по идентификатору или email.
   - Метод `Create` создает нового пользователя, валидируя данные и выполняя необходимые действия перед созданием.
   - Методы `Find` и `FindByEmail` выполняют поиск пользователей по идентификатору и email соответственно.

18.userrepository_test.go
   - Файл userrepository_test.go содержит юнит-тесты для методов UserRepository.
   - В тестах проверяется корректность создания и поиска пользователей, а также обработка ошибок при отсутствии записей.
   - С использованием asserт из пакета testify производится проверка ожидаемых результатов.

19.validations.go
   - В файле validations.go определена функция `requiredIf`, которая возвращает правило валидации в зависимости от условия.
   - Функция использует пакет озаренной валидации `github.com/go-ozzo/ozzo-validation`.


